!function(){if("undefined"!=typeof window&&"undefined"!=typeof document){var t="cavbot-widget",e="cavbot-widget-root",i={badge:{inline:"/sdk/ui/v1/cavbot-badge-inline.css",ring:"/sdk/ui/v1/cavbot-badge-ring.css"},head:{orbit:"/sdk/ui/v1/cavbot-head-orbit.css"},body:{full:"/sdk/ui/v1/cavbot-full-body.css"}},o={badge:['<div class="cavbot-dm-avatar" data-cavbot-head="dm">','  <div class="cavbot-dm-avatar-core">','    <div class="cavbot-dm-face">','      <div class="cavbot-eyes-row">','        <div class="cavbot-eye">','          <div class="cavbot-eye-inner">','            <div class="cavbot-eye-pupil"></div>',"          </div>",'          <div class="cavbot-eye-glow"></div>','          <div class="cavbot-blink"></div>',"        </div>","",'        <div class="cavbot-eye">','          <div class="cavbot-eye-inner">','            <div class="cavbot-eye-pupil"></div>',"          </div>",'          <div class="cavbot-eye-glow"></div>','          <div class="cavbot-blink"></div>',"        </div>","      </div>","    </div>","  </div>","</div>"].join("\n"),head:["\x3c!-- CavBot Head Only â€” Floating avatar with eye tracking --\x3e",'<div class="cavbot-head-avatar" data-cavbot-head>','  <div class="cavbot-head-avatar-inner">','    <div class="cavbot-antenna">','      <div class="cavbot-antenna-tip"></div>',"    </div>","",'    <div class="cavbot-head">','      <div class="cavbot-face">','       <div class="cavbot-eyes-row">','  <div class="cavbot-eye">','    <div class="cavbot-eye-inner">','      <div class="cavbot-eye-track">','        <div class="cavbot-eye-pupil"></div>',"      </div>","    </div>",'    <div class="cavbot-eye-glow"></div>','    <div class="cavbot-blink"></div>',"  </div>","",'  <div class="cavbot-eye">','    <div class="cavbot-eye-inner">','      <div class="cavbot-eye-track">','        <div class="cavbot-eye-pupil"></div>',"      </div>","    </div>",'    <div class="cavbot-eye-glow"></div>','    <div class="cavbot-blink"></div>',"  </div>","</div>","",'        <div class="cavbot-scan" aria-hidden="true">','          <div class="cavbot-scan-bar"></div>','          <div class="cavbot-scan-dots">',"            <span>CAV</span>","            <span>BOT</span>","            <span>404</span>","          </div>","        </div>","      </div>","    </div>","  </div>","</div>"].join("\n"),body:['<div class="cavbot-shell">','  <div class="cavbot-orbit">','    <div class="cavbot">','      <div class="cavbot-inner">','        <div class="cavbot-antenna">','          <div class="cavbot-antenna-tip"></div>',"        </div>","",'        <div class="cavbot-head">','          <div class="cavbot-face">','           <div class="cavbot-eyes-row">','  <div class="cavbot-eye">','    <div class="cavbot-eye-inner">','      <div class="cavbot-eye-track">','        <div class="cavbot-eye-pupil"></div>',"      </div>","    </div>",'    <div class="cavbot-eye-glow"></div>','    <div class="cavbot-blink"></div>',"  </div>","",'  <div class="cavbot-eye">','    <div class="cavbot-eye-inner">','      <div class="cavbot-eye-track">','        <div class="cavbot-eye-pupil"></div>',"      </div>","    </div>",'    <div class="cavbot-eye-glow"></div>','    <div class="cavbot-blink"></div>',"  </div>","</div>","",'            <div class="cavbot-scan" aria-hidden="true">','              <div class="cavbot-scan-bar"></div>','              <div class="cavbot-scan-dots">',"                <span>CAV</span>","                <span>BOT</span>","                <span>404</span>","              </div>","            </div>","          </div>","        </div>","",'        <div class="cavbot-body">','          <div class="cavbot-body-core">','            <div class="cavbot-body-top">','              <div class="cavbot-led-row">','                <div class="cavbot-led cavbot-led--blue"></div>','                <div class="cavbot-led cavbot-led--lime"></div>','                <div class="cavbot-led cavbot-led--purple"></div>',"              </div>",'              <div class="cavbot-body-label-main">CavBot</div>',"            </div>","",'            <div class="cavbot-body-mid">','              <div class="cavbot-body-meter-track">','                <div class="cavbot-body-meter-fill"></div>',"              </div>","            </div>","          </div>","        </div>","",'        <div class="cavbot-base">','          <div class="cavbot-foot"></div>','          <div class="cavbot-foot"></div>','          <div class="cavbot-shadow"></div>',"        </div>","      </div>","    </div>","  </div>","</div>"].join("\n")},a={badge:["inline","ring"],head:["orbit"],body:["full"]},n=["bottom-right","bottom-left","top-right","top-left","center","center-left","center-right","inline"],d={widget:"badge",style:"inline",position:"bottom-right",theme:"auto",motion:"0",zIndex:9999,debug:"0"},c={"bottom-right":{position:"fixed",bottom:"24px",right:"24px"},"bottom-left":{position:"fixed",bottom:"24px",left:"24px"},"top-right":{position:"fixed",top:"24px",right:"24px"},"top-left":{position:"fixed",top:"24px",left:"24px"},center:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},"center-left":{position:"fixed",top:"50%",left:"24px",transform:"translateY(-50%)"},"center-right":{position:"fixed",top:"50%",right:"24px",transform:"translateY(-50%)"},inline:null};try{var s=function(){var e,i,c=function(){if(document.currentScript)return document.currentScript;for(var e=document.getElementsByTagName("script"),i=e.length-1;i>=0;i--){var o=e[i];if(o){var a=o.dataset;if(a&&a[t])return o;var n=o.getAttribute("src");if(n&&-1!==n.indexOf("cavbot-widget"))return o}}return null}(),s=r(c,"debug"),l="1"===s||"true"===s,b=l&&void 0!==window.console?function(){var t=Array.prototype.slice.call(arguments);t.unshift("[CavBot widget]"),window.console.debug.apply(window.console,t)}:function(){},p={widget:(e=r(c,t)||d.widget,i=v(e).toLowerCase(),o[i]?i:d.widget),style:d.style,position:d.position,theme:d.theme,zIndex:d.zIndex,motionRequested:!1,motionEnabled:!1};p.style=function(t,e){var i=v(e).toLowerCase(),o=a[t];return o?-1!==o.indexOf(i)?i:o[0]:d.style}(p.widget,r(c,"style")||d.style),p.position=function(t){var e=v(t).toLowerCase();return-1!==n.indexOf(e)?e:d.position}(r(c,"position")||d.position),p.theme=function(t){var e=v(t).toLowerCase();return"light"===e||"dark"===e?e:d.theme}(r(c,"theme")||d.theme),p.zIndex=function(t,e){var i=parseInt(t,10);return isNaN(i)?e:i}(r(c,"z"),d.zIndex);var f=v(r(c,"motion"));p.motionRequested="1"===f||"true"===f;var m=function(){if("function"!=typeof window.matchMedia)return!1;try{return window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch(t){return!1}}(),w=p.motionRequested&&!m,g=function(t){if(!t)return document.location.protocol+"//"+document.location.host;try{var e=t.getAttribute("src");if(e)return new window.URL(e,document.location.href).origin}catch(t){}return document.location.protocol+"//"+document.location.host}(c),y=v(r(c,"project-key")),h=v(r(c,"site"));if(y&&h){var x=function(t){return r(t,"config-origin")||(window&&window.CAVBOT_APP_ORIGIN?window.CAVBOT_APP_ORIGIN:"https://app.cavbot.io")}(c);return function(t,e,i,o){var a=new URLSearchParams({widget:e.widget,style:e.style,position:e.position,theme:e.theme}),n=t.replace(/\/+$/,"")+"/api/embed/widget/config?"+a.toString();return fetch(n,{method:"GET",headers:{"Content-Type":"application/json","x-cavbot-project-key":i,"x-project-key":i,"x-cavbot-site":o},cache:"no-store"}).then((function(t){return t.ok?t.json():t.text().then((function(t){var e=null;try{e=JSON.parse(t||"")}catch(t){e=null}var i=e&&e.code?e.code:"WIDGET_DENIED";throw new Error(i)}))}))}(x,p,y,h).then((function(t){if(!t||!0!==t.allowed||!t.config)throw new Error(t&&t.code?t.code:"WIDGET_DENIED");u(t.config,p,c,g,b,p.motionRequested,w)})).catch((function(t){l&&b("Widget initialization blocked:",t&&t.message?t.message:t)}))}l&&b("Widget missing project key or site identifier; aborting initialization.")}();s&&"function"==typeof s.catch&&s.catch((function(t){void 0!==window.console&&window.console.error&&window.console.error("[CavBot widget] Initialization failed",t)}))}catch(t){void 0!==window.console&&window.console.error&&window.console.error("[CavBot widget] Initialization failed",t)}}function v(t){return"string"==typeof t?t.trim():""}function r(t,e){if(!t||!t.getAttribute)return"";var i="data-"+e,o=t.getAttribute(i);if(null!==o)return o;if(t.dataset){if(t.dataset[e])return t.dataset[e];var a=e.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}));if(a!==e&&t.dataset[a])return t.dataset[a]}return""}function l(t,e){if(!t)return"";if(0===t.indexOf("http://")||0===t.indexOf("https://"))return t;var i=e;return i||(i=document.location.protocol+"//"+document.location.host),"/"===i.slice(-1)&&(i=i.slice(0,-1)),"/"!==t.charAt(0)&&(t="/"+t),i+t}function b(t,e){var i=function(t){return c.hasOwnProperty(t)?c[t]:c[d.position]}(e);if(i)for(var o in i)i.hasOwnProperty(o)&&(t.style[o]=i[o])}function u(t,a,n,d,c,s,v){if(t)if(document.getElementById(e))c("Widget already mounted; aborting duplicate initialization.");else{var r=i[t.widget]&&i[t.widget][t.style];r&&function(t){if(t){var e=window.__cavbotWidgetCssLoaded;if(e||(e=[],window.__cavbotWidgetCssLoaded=e),-1===e.indexOf(t)){e.push(t);var i=document.head||document.getElementsByTagName("head")[0];if(i){var o=document.createElement("link");o.rel="stylesheet",o.href=t,o.crossOrigin="anonymous",i.appendChild(o)}}}}(l(r,d));var u,p=o[t.widget]||o[a.widget],f=function(t,i){var o=document.createElement("div");o.id=e,o.className="cavbot-widget-root cavbot-widget-position cavbot-widget-position-"+t.position,o.setAttribute("aria-label","CavBot widget"),o.setAttribute("role","region"),o.setAttribute("data-theme",t.theme),o.setAttribute("data-widget",t.widget),o.setAttribute("data-position",t.position),o.setAttribute("data-motion",t.motionEnabled?"1":"0"),o.dataset.motion=t.motionEnabled?"1":"0",o.tabIndex=0,"auto"===t.theme&&(o.className+=" cavbot-widget-theme-auto"),i&&(o.innerHTML=i);var a=t.zIndex;return"number"==typeof a&&(o.style.zIndex=String(a)),"inline"!==t.position&&b(o,t.position),o}({widget:t.widget,position:t.position,theme:t.theme,zIndex:"number"==typeof t.zIndex?t.zIndex:a.zIndex,motionEnabled:v},p);u=function(){!function(t,e,i){if(t)if("inline"===e.position&&i&&i.parentNode)i.parentNode.insertBefore(t,i);else{var o=document.body||document.documentElement;o&&o.appendChild(t)}}(f,{position:t.position},n)},"loading"!==document.readyState?u():document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),u()})),function(t,e){return!!t&&("head"===t.widget||"body"===t.widget||e)}(t,s)&&function(t){if(!document)return;if(window.__cavaiGen1Loaded)return;if(window.__cavaiGen1Loading)return;var e=document.createElement("script"),i="/sdk/brain/v1/cavai.min.js";e.async=!0,e.defer=!0,e.src=l(i,t),window.__cavaiGen1Loading=!0,e.onload=function(){window.__cavaiGen1Loaded=!0},e.onerror=function(){window.__cavaiGen1Loading=!1};var o=document.head||document.body||document.documentElement;o&&o.appendChild(e)}(d)}}}();